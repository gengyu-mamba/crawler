# 定时与邮件

在这一章节，我们希望为一般的爬虫程序新增两个实用性比较强的功能：

第一是定时功能，即程序可以根据我们设定的时间自动爬取数据；第二是通知功能，即程序可以把爬取到的数据结果以邮件的形式自动发送到我们的邮箱。

这两个功能可以让爬虫程序定时向我们汇报。

试想一下，如果你是一位股票（或比特币）的持有者，你希望及时爬取股票（或比特币）每日的价格数据，方便你能及时卖出或买入，那每天都去启动一遍爬虫程序是极其不高效的。

而此时，如果你的爬虫程序有定时和发送邮件功能，能自动爬取每天的数据，并且只有当价格达到某个你设置的价位时，才通知你可以有所行动了，平时都不打扰你，是不是很爽？

不止如此，如果你有特别想看的演唱会，但一开售就卖完了，有定时和发送邮件功能的爬虫程序同样可以辛勤地帮你刷票，当刷到有余票时，马上通知你去购票，多好。（买火车票也是一样的道理噢）

这两个功能不仅能帮你获取这种实时变化的数据，还可以帮你获取周期性的数据。

比如，你所在的公司每周都会把周报发到官网上，而你所在的部门是由你去负责下载周报，并整理相关信息，再传递给部门成员。那如果有定时和通知功能的程序，每周你就可以静待程序把更新的周报信息爬下来，并自动发送到你邮箱。

了解这两个功能的意义后，我们就可以开始今天正式的学习了。

我们选择的项目是——自动爬取每日的天气，并定时把天气数据和穿衣提示发送到你的邮箱。

之所以选择这个相对朴实的爬虫项目，是因为天气每天都会有变化，那么在学完这一章节之后，不出意外，你就可以在明早收到天气信息了。以此，亲身体验程序的作用。

你还可以把每日的天气和温馨的穿衣提示发送到你的恋人、家人、或朋友的邮箱里，这也是传递心意的一种方式。

好啦，那我们来分析一下程序实现的思路吧。

总体上来说，可以把这个程序分成三个功能块：【爬虫】+【邮件】+【定时】

对爬虫部分，我们比较熟悉；而对通知部分，选择的是用邮件来通知，我们将使用smtplib、email库来实现这一需求；对定时功能，有一个schedule，方便好用。

这三个功能对应的是三段代码，分别写出三段代码后再组装起来，就能实现我们的项目目标。

## 爬虫
在百度搜索天气，弹出来的第一个网址是：

http://www.weather.com.cn/weather/101020100.shtml

点进去的是中国气象网的天气预报：


